<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Register - Rent A Car</title>
    <link rel="stylesheet" href="register.css" />
    <link rel="stylesheet" href="../common/loader.css" />
  </head>
  <body>
    <!-- Page loader -->
    <div id="page-loader" class="page-loader" aria-hidden="true">
      <div class="loader-inner">
        <img src="../images/rentacarlogo.png" alt="Rent a Car" class="loader-logo" />
        <div class="spinner" aria-hidden="true"></div>
        <span class="sr-only" id="loader-status">Loading, please wait</span>
      </div>
    </div>
    <div class="register-container">
      <div class="register-left">
        <!-- Dark overlay will be added via CSS -->
      </div>
      <div class="register-right">
        <a href="../homepage/homepage.html" class="back-btn">Back</a>
        <div class="register-form-container">
          <div class="logo">
            <img src="../images/rentacarlogo.png" alt="Rent A Car Logo" />
            <h1 class="logo-text">
              Rent a
              <strong>Car</strong>
            </h1>
          </div>
          <form id="registerForm" class="register-form">
            <div class="form-group">
              <label for="fullName">Full Name</label>
              <input type="text" id="fullName" name="fullName" required />
            </div>
            <div class="form-group">
              <label for="email">E-Mail Address</label>
              <input type="email" id="email" name="email" required />
            </div>
            <div class="form-group">
              <label for="password">Password</label>
              <div class="password-container">
                <input type="password" id="password" name="password" required />
                <span class="password-toggle" onclick="togglePassword('password')">ğŸ‘</span>
              </div>
            </div>
            <div class="form-group">
              <label for="confirmPassword">Confirm Password</label>
              <div class="password-container">
                <input type="password" id="confirmPassword" name="confirmPassword" required />
                <span class="password-toggle" onclick="togglePassword('confirmPassword')">ğŸ‘</span>
              </div>
            </div>
            <button type="submit" class="register-btn">Register</button>
            <p class="login-link">
              Already have an account?
              <a href="../login/login.html">Login here</a>
            </p>
          </form>
        </div>
      </div>
    </div>
    <script src="register.js"></script>
    <script>
      (function () {
        const MIN_LOADER_MS = 200;
        const loader = document.getElementById("page-loader");
        let loaderShownAt = 0;

        function showLoader() {
          if (!loader) return (loaderShownAt = Date.now());
          loader.classList.remove("hidden");
          try {
            loader.setAttribute("aria-hidden", "false");
          } catch (e) {}
          loaderShownAt = Date.now();
        }

        function hideLoaderSoon() {
          const elapsed = Date.now() - loaderShownAt;
          const wait = Math.max(0, MIN_LOADER_MS - elapsed, 40);
          setTimeout(() => {
            if (loader) {
              loader.classList.add("hidden");
              try {
                loader.setAttribute("aria-hidden", "true");
              } catch (e) {}
            }
          }, wait);
        }

        document.addEventListener("DOMContentLoaded", function () {
          if (!loaderShownAt) loaderShownAt = Date.now();
          hideLoaderSoon();
        });

        ["pointerdown", "touchstart"].forEach((ev) =>
          document.addEventListener(
            ev,
            function (e) {
              const a = e.target.closest && e.target.closest("a");
              if (!a) return;
              const href = a.getAttribute("href");
              if (!href) return;
              if (href.startsWith("#") || href.startsWith("mailto:") || a.target === "_blank") return;
              showLoader();
            },
            { passive: true }
          )
        );

        document.addEventListener(
          "click",
          function (e) {
            const a = e.target.closest && e.target.closest("a");
            if (!a) return;
            const href = a.getAttribute("href");
            if (!href) return;
            if (href.startsWith("#") || href.startsWith("mailto:") || a.target === "_blank") return;
            try {
              const url = new URL(href, location.href);
              if (url.origin !== location.origin) return;
              e.preventDefault();
              showLoader();
              const elapsed = Date.now() - loaderShownAt;
              const remaining = Math.max(0, MIN_LOADER_MS - elapsed);
              setTimeout(() => (location.href = url.href), Math.max(200, remaining));
            } catch (e) {}
          },
          true
        );
      })();
    </script>
  </body>
</html>
